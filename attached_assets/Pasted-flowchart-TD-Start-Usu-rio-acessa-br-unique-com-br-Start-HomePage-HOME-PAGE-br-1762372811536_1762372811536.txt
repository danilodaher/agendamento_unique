flowchart TD
    Start([ğŸ‘¤ UsuÃ¡rio acessa<br/>unique.com.br])
    Start --> HomePage[ğŸ  HOME PAGE<br/>Hero + Menu + CTA]
    
    HomePage --> Action1{AÃ§Ã£o}
    Action1 -->|Clica AGENDAR| BookingPage[ğŸ“… PÃGINA AGENDAMENTO]
    Action1 -->|Menu Sobre| About[â„¹ï¸ Sobre]
    Action1 -->|Menu Contato| Contact[ğŸ“ Contato]
    
    BookingPage --> Step1[ğŸ“ STEP 1: Tipo e Data]
    Step1 --> ShowCards[ğŸƒ 3 Cards: Quadra/Evento/Festa]
    ShowCards --> SelectType[ğŸ‘† UsuÃ¡rio seleciona tipo]
    SelectType --> CardActive[âœ… Card destacado em roxo]
    
    CardActive --> DatePicker[ğŸ“… Date Picker aparece]
    DatePicker --> SelectDate[ğŸ‘† Seleciona data]
    SelectDate --> ValidDate{Data vÃ¡lida?}
    
    ValidDate -->|NÃ£o| ErrorDate[âŒ Toast: Data invÃ¡lida]
    ErrorDate --> DatePicker
    ValidDate -->|Sim| NextBtn1[ğŸŸ¢ BotÃ£o PRÃ“XIMO ativo]
    
    NextBtn1 --> Step2[ğŸ“ STEP 2: HorÃ¡rios]
    Step2 --> Loading[â³ Loading horÃ¡rios...]
    Loading --> APICall[ğŸ”Œ GET /api/availability]
    APICall --> ShowGrid[ğŸ• Grid de horÃ¡rios]
    
    ShowGrid --> SlotType{Status}
    SlotType -->|DisponÃ­vel| Green[ğŸŸ¢ Card Verde<br/>ClicÃ¡vel]
    SlotType -->|Ocupado| Red[ğŸ”´ Card Vermelho<br/>Bloqueado]
    
    Green --> SelectSlot[ğŸ‘† Seleciona horÃ¡rio]
    SelectSlot --> ModeCheck{Modo}
    ModeCheck -->|Quadra| Multi[âœ… MÃºltiplos permitidos]
    ModeCheck -->|Evento| Single[âœ… Apenas 1]
    
    Multi --> Summary[ğŸ“Š Resumo lateral<br/>Total calculado]
    Single --> Summary
    Summary --> NextBtn2[ğŸŸ¢ BotÃ£o PRÃ“XIMO ativo]
    
    NextBtn2 --> Step3[ğŸ“ STEP 3: Dados]
    Step3 --> Form[ğŸ“‹ FormulÃ¡rio]
    
    Form --> FieldName[ğŸ‘¤ Nome]
    FieldName --> ValidName{VÃ¡lido?}
    ValidName -->|NÃ£o| ErrName[âŒ Border vermelho]
    ErrName --> FieldName
    ValidName -->|Sim| OkName[âœ… Border verde]
    
    OkName --> FieldPhone[ğŸ“ Telefone<br/>MÃ¡scara automÃ¡tica]
    FieldPhone --> ValidPhone{VÃ¡lido?}
    ValidPhone -->|NÃ£o| ErrPhone[âŒ Incompleto]
    ErrPhone --> FieldPhone
    ValidPhone -->|Sim| OkPhone[âœ… Ok]
    
    OkPhone --> FieldEmail[ğŸ“§ Email]
    FieldEmail --> ValidEmail{VÃ¡lido?}
    ValidEmail -->|NÃ£o| ErrEmail[âŒ Formato invÃ¡lido]
    ErrEmail --> FieldEmail
    ValidEmail -->|Sim| OkEmail[âœ… Ok]
    
    OkEmail --> FieldObs[ğŸ’­ ObservaÃ§Ãµes<br/>Opcional]
    FieldObs --> AllOk{Tudo ok?}
    AllOk -->|NÃ£o| FormDisabled[âš« BotÃ£o disabled]
    AllOk -->|Sim| FormEnabled[ğŸŸ¢ BotÃ£o CONFIRMAR ativo]
    
    FormEnabled --> ResumoCard[ğŸ“Š Card Resumo<br/>Tipo, Data, HorÃ¡rios, Valor]
    ResumoCard --> Submit[ğŸ‘† Clica CONFIRMAR]
    
    Submit --> LoadingSubmit[â³ Processando...]
    LoadingSubmit --> APIPost[ğŸ”Œ POST /api/bookings]
    APIPost --> ServerCheck{Conflito?}
    
    ServerCheck -->|Sim| ModalError[ğŸ”´ Modal: HorÃ¡rio indisponÃ­vel<br/>SugestÃ£o de alternativas]
    ModalError --> Step2
    
    ServerCheck -->|NÃ£o| CreateBooking[âœ… Criar reserva<br/>DB + Calendar + Email]
    CreateBooking --> Redirect[â¡ï¸ /confirmacao/ID]
    
    Redirect --> Step4[ğŸ“ STEP 4: ConfirmaÃ§Ã£o]
    Step4 --> SuccessHero[ğŸ‰ RESERVA CONFIRMADA!]
    
    SuccessHero --> DetailsCard[ğŸ“‹ Card Detalhes<br/>NÂº UNQ-12345<br/>Tipo, Data, HorÃ¡rios<br/>Nome, Tel, Email, Valor]
    
    DetailsCard --> Actions[ğŸ¯ AÃ§Ãµes]
    Actions --> CalBtns[ğŸ“… Add to Calendar<br/>Google/Apple/Outlook]
    Actions --> CancelLink[ğŸ”— Link cancelar]
    Actions --> Share[ğŸ“¤ Compartilhar]
    Actions --> BackHome[ğŸ  Voltar home]
    
    CancelLink --> CancelPage[âŒ PÃGINA CANCELAMENTO]
    CancelPage --> VerifyToken{Token vÃ¡lido?}
    
    VerifyToken -->|NÃ£o| Error404[ğŸ”´ 404: Link invÃ¡lido]
    VerifyToken -->|Sim| LoadBooking[ğŸ“¦ Carrega reserva]
    
    LoadBooking --> CancelCard[ğŸ“‹ Card Cancelamento<br/>Detalhes da reserva<br/>âš ï¸ AÃ§Ã£o irreversÃ­vel]
    
    CancelCard --> TimeCheck{Mais de 2h?}
    TimeCheck -->|NÃ£o| Blocked[ğŸ”´ Cancelamento negado<br/>Contate-nos]
    TimeCheck -->|Sim| ReasonField[ğŸ“ Campo motivo opcional]
    
    ReasonField --> CancelBtn[ğŸ”´ BotÃ£o CONFIRMAR CANCEL]
    CancelBtn --> ConfirmDialog[âš ï¸ Dialog: TEM CERTEZA?<br/>Voltar / Sim, cancelar]
    
    ConfirmDialog --> ProcessCancel[âš™ï¸ Processar<br/>Delete Calendar<br/>Update DB<br/>Cancel Follow-up<br/>Send Email]
    
    ProcessCancel --> CancelSuccess[âœ… CANCELAMENTO CONFIRMADO<br/>Email enviado]
    
    CreateBooking --> Email1[ğŸ“§ Email ConfirmaÃ§Ã£o<br/>Detalhes + Links]
    Email1 --> Wait24h[â° Aguardar 24h]
    
    Wait24h --> CronJob[âš™ï¸ Cron Job]
    CronJob --> EmailFeedback[ğŸ“§ Email AvaliaÃ§Ã£o<br/>Como foi?]
    
    EmailFeedback --> ClickFeedback[ğŸ‘† Clica link]
    ClickFeedback --> FeedbackPage[â­ PÃGINA AVALIAÃ‡ÃƒO]
    
    FeedbackPage --> Rating[â­ Seletor estrelas]
    Rating --> Comments[ğŸ’­ ComentÃ¡rios]
    Comments --> Recommend[ğŸ‘ Recomendaria?<br/>Sim/NÃ£o]
    Recommend --> Suggestions[ğŸ’¡ SugestÃµes]
    
    Suggestions --> SubmitFeedback[ğŸ‘† Enviar avaliaÃ§Ã£o]
    SubmitFeedback --> SaveDB[ğŸ’¾ Salvar no DB]
    SaveDB --> ThankYou[ğŸ™ OBRIGADO!<br/>Volte sempre]
    
    ThankYou --> End([ğŸ FIM])
    CancelSuccess --> End
    BackHome --> HomePage
    
    style Start fill:#667eea,stroke:#5568d3,stroke-width:4px,color:#fff
    style End fill:#667eea,stroke:#5568d3,stroke-width:4px,color:#fff
    style Step1 fill:#764ba2,stroke:#5a3680,stroke-width:3px,color:#fff
    style Step2 fill:#764ba2,stroke:#5a3680,stroke-width:3px,color:#fff
    style Step3 fill:#764ba2,stroke:#5a3680,stroke-width:3px,color:#fff
    style Step4 fill:#27ae60,stroke:#1e8449,stroke-width:3px,color:#fff